"use strict";(self.webpackChunkdenntenna_github_io=self.webpackChunkdenntenna_github_io||[]).push([[6401],{72006:function(e,t,n){n.r(t),n.d(t,{_frontmatter:function(){return r},default:function(){return p}});var a=n(63366),i=(n(67294),n(64983)),l=n(66101),o=["components"],r={},u={_frontmatter:r},c=l.Z;function p(e){var t=e.components,n=(0,a.Z)(e,o);return(0,i.kt)(c,Object.assign({},u,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",null,"12-08-2022"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"managed to deploy ogbv-ml-rest to google cloud run",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"very simple ",(0,i.kt)("inlineCode",{parentName:"li"},"gcloud run deploy --memory 8G --cpu 4")),(0,i.kt)("li",{parentName:"ul"},"Query Command ",(0,i.kt)("inlineCode",{parentName:"li"},"curl -X POST https://ogbv-ml-rest-■■■■■■-■■■■.a.run.app/predict -H 'Content-Type: application/json' -d '{\"text\":\"■■■■ ■■■■ ■■■■■■■ ■■■■\"}'")),(0,i.kt)("li",{parentName:"ul"},"It should scale up and down automatically. It will also scale down to 0 when not being used which is a huge money saver"),(0,i.kt)("li",{parentName:"ul"},"Since the requests to /predict go via ",(0,i.kt)("inlineCode",{parentName:"li"},"uli-rest-api")," i might be able to keep this public for now and still migrate uli to gke"))),(0,i.kt)("li",{parentName:"ul"},"Conclusion for Uli",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Lets try running the entire app on cloud run. No need to involve clusters and kubernetes"),(0,i.kt)("li",{parentName:"ul"},"strategy",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"allow unauthenticated requests to ",(0,i.kt)("inlineCode",{parentName:"li"},"uli-rest")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"uli-rest")," can communicate with ",(0,i.kt)("inlineCode",{parentName:"li"},"ogbv-ml-rest")," via ",(0,i.kt)("a",{parentName:"li",href:"https://cloud.google.com/run/docs/authenticating/service-to-service?hl=en"},"service-to-service authentication")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"uli-rest")," can communicate to a cloud-sql instance")))))))}p.isMDXComponent=!0},63366:function(e,t,n){function a(e,t){if(null==e)return{};var n,a,i={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{Z:function(){return a}})}}]);
//# sourceMappingURL=component---src-pages-logs-12-08-2022-mdx-8d53aaa0ba179d1d716e.js.map